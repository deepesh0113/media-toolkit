<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Media Toolkit</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- WaveSurfer -->
    <script src="https://unpkg.com/wavesurfer.js@7"></script>
    <script src="https://unpkg.com/wavesurfer.js@7/dist/plugins/regions.min.js"></script>

    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/svg+xml" href="media_toolkit.png">
    <link rel="icon" type="image/png" href="media_toolkit.png">

</head>

<body>

    <div class="container">

        <!-- ================= HEADER ================= -->
        <header class="hero">
            <h1>Media Toolkit</h1>
            <p>
                A browser-native laboratory for precise audio and video manipulation.
                Designed for academic, research, and professional workflows.
            </p>
        </header>

        <!-- ================= TABS ================= -->
        <nav class="tabs">
            <button class="tab active" onclick="openTab('audioTab', this)">ðŸŽ§ Audio Lab</button>
            <button class="tab" onclick="openTab('videoTab', this)">ðŸŽ¬ Video Lab</button>
            <button class="tab" onclick="openTab('mergeTab', this)">ðŸ”— Merge Signals</button>
        </nav>

        <!-- ================= AUDIO TAB ================= -->
        <section id="audioTab" class="tabContent active">

            <!-- ================= AUDIO SIGNAL PROCESSING ================= -->
            <div class="card">
                <h2>Audio Signal Processing</h2>
                <p class="example">
                    Play audio, inspect the timeline, define start and end time,
                    and extract required audio segments directly in the browser.
                </p>

                <ul class="points">
                    <li>Waveform & timeline visualization</li>
                    <li>Manual time-based audio cutting</li>
                    <li>Download cut segment or remaining audio</li>
                    <li>Supported formats: MP3, WAV, M4A, OGG, OPUS (WhatsApp audio)</li>
                </ul>

                <!-- AUDIO INPUT -->
                <input type="file" id="audioFile" accept="audio/*,video/*">

                <!-- WAVEFORM -->
                <div id="waveform"></div>

                <!-- PLAY CONTROL -->
                <div class="controls">
                    <button onclick="playPause()">Play / Pause</button>
                </div>

                <!-- TIME INPUTS -->
                <div class="grid">
                    <div>
                        <label>Start Time (seconds)</label>
                        <input type="number" id="cutStart" step="0.1" value="0">
                    </div>
                    <div>
                        <label>End Time (seconds)</label>
                        <input type="number" id="cutEnd" step="0.1">
                    </div>
                </div>

                <!-- ACTION BUTTONS -->
                <div class="controls">
                    <button onclick="downloadCutPart()">Download Cut Part</button>
                    <button onclick="downloadRemainingPart()">Download Remaining Audio</button>
                </div>

                <!-- INFO -->
                <!-- INFO -->
                <div class="info">
                    <span>Current Time: <b id="currentTime">0.00</b>s</span>
                    <span>Total Duration: <b id="audioDuration">0.00</b>s</span>
                </div>

            </div>

            <!-- ================= DATASET MANAGEMENT ================= -->
            <div class="card subtle">
                <h3>Audio Dataset Management</h3>
                <p class="example">
                    Preserve original audio while applying meaningful filenames
                    for datasets, lectures, and archival storage.
                </p>

                <input type="text" id="renameAudio" placeholder="e.g. dsp-lecture-01">
                <button onclick="downloadRenamedAudio()">Download Original with New Name</button>
            </div>

        </section>



        <!-- ================= VIDEO TAB ================= -->
        <section id="videoTab" class="tabContent">

            <div class="card">
                <h2>Video Intelligence Lab</h2>
                <p class="example">
                    A modern visual processing module for temporal analysis,
                    preview-based trimming, and frame-level inspection.
                </p>

                <ul class="points">
                    <li>Client-side secure video preview</li>
                    <li>Time-accurate trimming</li>
                    <li>Playback speed & frame capture</li>
                </ul>

                <input type="file" id="videoFile" accept="video/*">
                <video id="videoPlayer" controls></video>

                <!-- VIDEO METADATA -->
                <div class="info">
                    <span>Duration: <b id="vDuration">--</b>s</span>
                    <span>Resolution: <b id="vResolution">--</b></span>
                    <span>Speed: <b id="vSpeed">1x</b></span>
                </div>

                <!-- TRIM CONTROLS -->
                <div class="grid">
                    <div>
                        <label>Start Time (seconds)</label>
                        <input type="number" id="vStart" step="0.1" value="0">
                    </div>
                    <div>
                        <label>End Time (seconds)</label>
                        <input type="number" id="vEnd" step="0.1">
                    </div>
                </div>

                <!-- ACTION BUTTONS -->
                <div class="controls">
                    <button onclick="previewVideo()">Preview Segment</button>
                    <button onclick="cutVideo()">Export Video</button>
                </div>

                <!-- EXTRA MODERN FEATURES -->
                <div class="controls">
                    <button onclick="changeSpeed(0.5)">0.5Ã— Speed</button>
                    <button onclick="changeSpeed(1)">1Ã— Normal</button>
                    <button onclick="changeSpeed(1.5)">1.5Ã— Speed</button>
                </div>

                <div class="controls">
                    <button onclick="captureFrame()">Capture Frame (PNG)</button>
                    <button onclick="experimental()">AI Tools (Experimental)</button>
                </div>
            </div>

        </section>


        <!-- ================= MERGE TAB ================= -->
        <section id="mergeTab" class="tabContent">

            <div class="card">
                <h2>Media Fusion Lab</h2>
                <p class="example">
                    Merge and synchronize audio and video signals for modern multimedia workflows.
                </p>

                <ul class="points">
                    <li>Audio concatenation (download supported)</li>
                    <li>Video stream synchronization (preview-safe)</li>
                    <li>Audio replacement for video (experimental)</li>
                    <li>Audio Supported formats: MP3, WAV, MP4, WebM</li>
                </ul>

                <!-- ========= OPTION 1: AUDIO + AUDIO ========= -->
                <div class="mergeBlock">
                    <h3>1. Audio + Audio Merge</h3>
                    <p class="mergeHint">Combine two audio files into one continuous waveform</p>

                    <input type="file" id="aa1" accept="audio/*,video/*">
                    <input type="file" id="aa2" accept="audio/*,video/*">

                    <button onclick="mergeAudioAudio()">Merge Audio & Download</button>
                </div>

                <!-- ========= OPTION 2: VIDEO + VIDEO ========= -->
                <div class="mergeBlock">
                    <h3>2. Video + Video Merge</h3>
                    <p class="mergeHint">
                        Sequential playback preview of two videos.
                        Export requires advanced processing.
                    </p>

                    <input type="file" id="vv1" accept="video/*">
                    <input type="file" id="vv2" accept="video/*">

                    <button onclick="mergeVideoVideo()">Preview Merged Video</button>

                    <video id="videoMergePreview" controls style="display:none;"></video>
                </div>

                <!-- ========= OPTION 3: AUDIO + VIDEO ========= -->
                <div class="mergeBlock">
                    <h3>3. Audio + Video Merge</h3>
                    <p class="mergeHint">
                        Replace video audio with external audio (sync preview).
                    </p>

                    <input type="file" id="avVideo" accept="video/*">
                    <input type="file" id="avAudio" accept="audio/*,video/*">

                    <button onclick="mergeAudioVideo()">Preview Audio + Video</button>
                </div>

            </div>

        </section>


        <footer>
            Fully client-side â€¢ zero data uploads â€¢ privacy-first architecture
        </footer>

    </div>

    <!-- TAB SCRIPT (UI only) -->
    <script>
        function openTab(id, btn) {
            document.querySelectorAll(".tabContent").forEach(t => t.classList.remove("active"));
            document.querySelectorAll(".tab").forEach(b => b.classList.remove("active"));
            document.getElementById(id).classList.add("active");
            btn.classList.add("active");
        }
    </script>

    <script src="script.js"></script>
</body>

</html>